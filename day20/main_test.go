package main

import (
	. "aoc"
	"testing"
)

func TestRoughness(t *testing.T) {
	s :=
`.#.#..#.##...#.##..#####
###....#.#....#..#......
##.##.###.#.#..######...
###.#####...#.#####.#..#
##.#....#.##.####...#.##
...########.#....#####.#
....#..#...##..#.#.###..
.####...#..#.....#......
#..#.##..#..###.#.##....
#.####..#.####.#.#.###..
###.#.#...#.######.#..##
#.####....##..########.#
##..##.#...#...#.#.#.#..
...#..#..#.#.##..###.###
.#.#....#.##.#...###.##.
###.#...#..#.##.######..
.#.#.###.##.##.#..#.##..
.####.###.#...###.#..#.#
..#.#..#..#.#.#.####.###
#..####...#.#.#.###.###.
#####..#####...###....##
#.##..#..#...#..####...#
.#.###..##..##..####.##.
...###...##...#...#..###`

	sea := toRuneSlices(Lines(s))
	roughness := 0
	// Rotate, Flip, until we find the monsters
	for i := 0; i < 2; i++ {
		for j := 0; j < 3; j++ {
			r := Roughness(sea)
			if r > 0 {
				roughness = r
			}
			sea = Rotate(sea)
		}
		sea = Flip(sea)
	}
	AssertEq(t, roughness > 0, true)

}

func toRuneSlices(ss []string) [][]rune {
	a := Make2DRuneSlice(len(ss), len(ss[0]))
	for y, r := range ss {
		for x, c := range r {
			a[y][x] = c
		}
	}
	return a
}
